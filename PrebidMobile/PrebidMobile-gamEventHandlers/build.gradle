plugins {
    id "maven-publish"
    id "com.jfrog.artifactory"
}
apply from: '../android.gradle'
apply from: '../publisher.gradle'
apply from: '../tests.gradle'

ext {
    gam_event_handler_version = "1.0.0"
}

android {
    defaultConfig {
        minSdkVersion 19
        versionName gam_event_handler_version
    }
}

artifactory {
    contextUrl = 'https://mediaadsdk.jfrog.io/artifactory/'
    publish {
        repository {
            repoKey = "adsdk"
            username = "nikhil.a@media.net"
            password = "Password@Jfrog064"
        }
    }
}

project.afterEvaluate {
    artifactoryPublish.dependsOn("assemble")
    publishing {
        publications {
            aar(MavenPublication) {
                setGroupId 'com.media.net'
                //You can either define these here or get them from project conf elsewhere
                setArtifactId 'PrebidMobile-gamEventHandlers'
                version gam_event_handler_version
                artifact bundleReleaseAar //aar artifact you want to publish
            }
        }
    }
    artifactoryPublish {
        publications(publishing.publications.aar)
    }
}

dependencies {
    implementation project(":PrebidMobile")
    implementation 'com.google.android.gms:play-services-ads:21.3.0'
}
